$(function(){var t=$(".accordeon__item"),e=$(".accordeon__name"),n="accordeon__item--activ";e.on("click",function(){var e=$(this).closest(t);e.hasClass(n)?e.removeClass(n):e.addClass(n).siblings().removeClass(n)})});var menuLink=document.querySelector(".hamburger-menu-link"),mobMenu=document.querySelector(".mobail"),close=document.querySelector(".mobail__closing");menuLink.addEventListener("click",function(e){e.preventDefault(),mobMenu.style.display="block"}),close.addEventListener("click",function(e){e.preventDefault(),mobMenu.style.display="none"}),$(function(){var t=$(".menu__item"),e=$(".menu__name"),n="menu__item--active";e.on("click",function(){var e=$(this).closest(t);e.hasClass(n)?e.removeClass(n):e.addClass(n).siblings().removeClass(n)})}),ymaps.ready(init);var placemarks=[{latitude:59.97,longitude:30.31,hintContent:'<div class="map__hint">ул. Литераторов, д. 19</div>',balloonContent:['<div class="map__balloon">','<img class="map__img" src="img/elements/map-marker.png" alt="Бургер"/>',"Самые вкусные бургеры у нас!","</div>"]},{latitude:59.94,longitude:30.25,hintContent:'<div class="map__hint">Малый проспект В О, д 64</div>',balloonContent:['<div class="map__balloon">','<img class="map__img" src="img/elements/map-marker.png" alt="Бургер"/>',"Самые вкусные бургеры у нас!","</div>"]},{latitude:59.93,longitude:30.34,hintContent:'<div class="map__hint">наб. реки Фонтанки, д. 56</div>',balloonContent:['<div class="map__balloon">','<img class="map__img" src="img/elements/map-marker.png" alt="Бургер"/>',"Самые вкусные бургеры у нас!","</div>"]},{latitude:59.92,longitude:30.5,hintContent:'<div class="map__hint">ул. Лопатина, д. 48</div>',balloonContent:['<div class="map__balloon">','<img class="map__img" src="img/elements/map-marker.png" alt="Бургер"/>',"Самые вкусные бургеры у нас!","</div>"]}],geoObjects=[];function init(){for(var e=new ymaps.Map("map",{center:[59.94,30.32],zoom:12,controls:["zoomControl"],behaviors:["drag"]}),t=0;t<placemarks.length;t++)geoObjects[t]=new ymaps.Placemark([placemarks[t].latitude,placemarks[t].longitude],{hintContent:placemarks[t].hintContent,balloonContent:placemarks[t].balloonContent.join("")},{iconLayout:"default#image",iconImageHref:"img/elements/map-marker.png",iconImageSize:[46,57],iconImageOffset:[-23,-57],iconImageClipRect:[[415,0],[461,57]]});var n=new ymaps.Clusterer({clusterIcons:[{href:"img/elements/map-marker.png",size:[100,100],offset:[-50,-50]}],clusterIconContentLayout:null});e.geoObjects.add(n),n.add(geoObjects)}var left=document.querySelector(".slaider__scrool-left"),right=document.querySelector(".slaider__scrool-reght"),slaids=document.querySelector(".slaider__list"),minRight=0,maxRight=400,step=100,currentRight=0;slaids.style.right=currentRight,right.addEventListener("click",function(e){e.preventDefault(),currentRight<maxRight?currentRight+=step:(currentRight=0,slaids.style.right=0),slaids.style.right=currentRight+"vw"}),left.addEventListener("click",function(e){e.preventDefault(),minRight<currentRight?currentRight-=step:currentRight=maxRight,slaids.style.right=currentRight+"vw"}),$(function(){var e=$(".compile"),n=$(".composit");e.on("click",function(e){e.preventDefault();var t=$(this).children(n).last();"none"==t.css("display")?t.css("display","block"):t.css("display","none")})});var player,form=document.querySelector(".form"),orderBtn=document.querySelector(".form__btn");function validateFofm(e){var t=!0;return validateFild(e.elements.name)||(t=!1),validateFild(e.elements.tel)||(t=!1),validateFild(e.elements.street)||(t=!1),validateFild(e.elements.house)||(t=!1),validateFild(e.elements.room)||(t=!1),t}function validateFild(e){return e.checkValidity()?!(e.nextElementSibling.textContent=""):(e.nextElementSibling.textContent=e.validationMessage,!1)}function onYouTubePlayerAPIReady(){player=new YT.Player("yt__player",{height:"405",width:"660",videoId:"M7lc1UVf-VE",playerVars:{controls:0,disablekb:0,modestbranding:0,rel:0,autoplay:0,showinfo:0},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function onPlayerStateChange(e){switch(e.data){case 1:$(".player__start").addClass("paused"),$(".player__wrapper").addClass("player__wrapper--active");break;case 2:$(".player__start").removeClass("paused")}}function onPlayerReady(){var e,t=player.getDuration();updateTimer(),clearInterval(e),e=setInterval(function(){changButtonPosition(player.getCurrentTime()/t*100+"%"),updateTimer()},1e3)}function updateTimer(){$(".player__duration-completed").text(formatTime(player.getCurrentTime())),$(".player__duratiom-estimate").text(formatTime(player.getDuration()))}function formatTime(e){var t=Math.round(e),n=Math.floor(t/60),a=t-60*n;return n+":"+(a<10?"0${seconds}":a)}function changButtonPosition(e){e=completed/duration*100+"%";$(".player__playback-button").css({left:e})}orderBtn.addEventListener("click",function(e){if(e.preventDefault(),validateFofm(form)){var t={name:form.elements.name.value,tel:form.elements.tel.value,street:form.elements.street.value,house:form.elements.house.value,housing:form.elements.housing.value,room:form.elements.room.value,floor:form.elements.floor.value,comment:form.elements.comment.value},n=new XMLHttpRequest;n.responseType="json",n.open("POST","https://webdev-api.loftschool.com/sendmail"),n.send(JSON.stringify(t)),n.addEventListener("load",function(){var t=document.querySelector(".modal"),e=document.querySelector(".modal__btn");t.style.display="flex",e.addEventListener("click",function(e){e.preventDefault(),t.style.display="none"})})}}),$(function(){var e=$(".comment__btn"),t=$(".comment__item"),n=($(".nohover"),$(".modalcom")),a=$(".modalcom__closing"),l=$(".comment__list");e.on("click",function(e){e.preventDefault(),"flex"==$(this).parent().last().siblings().css("display","flex").css("display")&&t.addClass("nohover").removeClass("comment__item")}),a.on("click",function(e){e.preventDefault(),n.css("display","none"),"none"==n.css("display")&&l.children().addClass("comment__item").removeClass("nohover")})}),$(function(){var l=$(".section__wrapper"),n=$(".maincontent"),a=!1,e=new MobileDetect(window.navigator.userAgent).mobile(),o=function(t){var e=-100*t+"%";!1===a&&(a=!0,n.css({transform:"translateY("+e+")"}),l.eq(t).addClass("active").siblings().removeClass("active"),setTimeout(function(){var e;a=!1,e=t,$(".pageScroll__item").eq(e).addClass("activ").siblings().removeClass("activ")},1300))},i=function(e){var t=l.filter(".active"),n=t.prev(),a=t.next();"up"===e&&n.length&&o(n.index()),"down"===e&&a.length&&o(a.index())};$(document).on({wheel:function(e){var t=0<e.originalEvent.deltaY?"down":"up";i(t)},keydown:function(e){switch(e.keyCode){case 40:i("down");break;case 38:i("up")}},touchmove:function(e){e.preventDefault()}}),$("[data-scroll-to]").on("click",function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-scroll-to");o(t)}),e&&$(document).swipe({swipe:function(e,t,n,a,l,o){}})}),$(".player__start").on("click",function(e){e.preventDefault(),1!==player.getPlayerState()?player.playVideo():player.pauseVideo()}),$(".player__playback").on("click",function(){var t=$(e.currentTarget),n=(e.pageX-t.offset().left)/t.width()*100,a=player.getDuration()/100*n;changButtonPosition(n),player.seekTo(a)}),$(".player__splash").on("click",function(){player.playVideo()});